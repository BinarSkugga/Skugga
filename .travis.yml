language: java
jdk:
- oraclejdk8
- oraclejdk11

cache:
  directories:
  - $HOME/.m2

install:
  - mvn clean:clean resources:resources compiler:compile jar:jar shade:shade install:install

script:
  - mvn resources:testResources compiler:testCompile surefire:test

deploy:
  -
    provider: script
    script: mvn deploy -P j8
    skip_cleanup: true
    on:
      jdk: oraclejdk8
  -
    provider: script
    script: mvn deploy -P j11
    skip_cleanup: true
    on:
      jdk: oraclejdk8